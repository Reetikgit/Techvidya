<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>

<header class="w3-container w3-teal">
  <h1>Login Example</h1>
</header>

<div class="w3-container w3-half w3-margin-top">

<form class="w3-container w3-card-4" id="loginform">

<p>
<input class="w3-input" type="text" style="width:90%" id="usn" required>
<label>USN</label></p>

<p>
<input class="w3-input" type="password" style="width:90%" id="pass" required>
<label>Password</label></p>

<p>
<input class="w3-radio" type="radio" name="gender" value="male" checked>
<label>Male</label></p>

<p>
<input class="w3-radio" type="radio" name="gender" value="female">
<label>Female</label></p>

<p>
<input class="w3-radio" type="radio" name="gender" value="" disabled>
<label>Don't know (Disabled)</label></p>

<p>
<input id="milk" class="w3-check" type="checkbox" checked="checked">
<label>Stay logged in</label></p>

<p>
<button class="w3-button w3-section w3-teal w3-ripple" type="submit" sendMessage() > Log in </button></p>
<br>
<a href="registrationform.html"><h2 style="color:black;"> new User?</h2>

</form>

</div>

</body>

 <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase.js"></script>
  <script type="text/javascript">

  
  var firebaseConfig = {
    apiKey: "AIzaSyB_5vqcnQ7sD2AsHeBRl2QB6GifZmp8jGM",
    authDomain: "contactform-673b7.firebaseapp.com",
    databaseURL: "https://contactform-673b7.firebaseio.com",
    projectId: "contactform-673b7",
    storageBucket: "",
    messagingSenderId: "172917494368",
    appId: "1:172917494368:web:1cc301177c4f4fd6a46905",
    measurementId: "G-N5BDJDDC63"

  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  
//Reference for form collection(3)
let formMessage = firebase.database().ref('Signup');
 database=firebase.database();
  // var ref=database.ref('Signup');
  // ref.on('value',gotData,errData);
  // function gotData(data)
  // {
  //   // console.log(data.val());
  //   var sc=data.val();
  //   var keys=Object.keys(sc);
  //  // console.log(keys);
  //   for(var i=0;i<keys.length;i++)
  //   {
  //     var k=keys[i];
  //     var initials=sc[k].name;
  //     var emails=sc[k].email;
  //    // console.log(initials,emails);
  //     var li=initials[5]+':: '+emails;

  //   }
  //    //datadisplay.append(li);
 	
  //  }
  
  // function errData(err)
  // {
  //   console.log('error');
  //   console.log(err);
  // }

//listen for submit event//(1)
document
  .getElementById('loginform')
  .addEventListener('submit', formSubmit);

//Submit form(1.2)
function formSubmit(e) {
 
  e.preventDefault();
   var usnD = document.querySelector('#usn').value;
   
  let pass = document.querySelector('#pass').value;
 
  // Get Values from the DOM
  database=firebase.database();
  var ref=database.ref('Signup');
  ref.on('value',gotData,errData);
   var initials;
   var count,sc,keys;
  function gotData(data)
  {
    //console.log(data.val());
     sc=data.val();
     keys=Object.keys(sc);
   
   // console.log(keys);
  
    for(var i=0;i<keys.length;i++)
    {
      count=0;
      var k=keys[i];
      initials=sc[k].usn;
      var password=sc[k].pass;
  
     
      if(initials==usnD.toUpperCase() &&password==pass)
	  {
		alert("Login Successfull")

		count++;
		break;
	  }
	 

		

    }
    
    if(count==0)
    {
		alert("Invalid Credentials");
    }
    // console.log(initials[5],emails);
     //datadisplay.append(li);
 	}
   
  
  function errData(err)
  {
    console.log('error');
    console.log(err);
  }
  
  //Hide Alert Message After Seven Seconds(6)
  setTimeout(function() {
    document.querySelector('.alert').style.display = 'none';
  }, 9999999);

  //Form Reset After Submission(7)
  document.getElementById('loginform').reset();
}

//Send Message to Firebase(4)


</script> 

</html>
